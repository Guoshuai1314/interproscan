<?xml version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <!-- Import common beans -->
    <import resource="../jobs/all-jobs-context.xml"/>
    <import resource="../../spring/jms/hornetq-config-single-jvm-context.xml"/>
    <import resource="../worker/embedded-worker-context.xml"/>

    <bean id="i5standalone" class="uk.ac.ebi.interpro.scan.jms.master.InterProScanMaster">
        <property name="embeddedBroker" ref="jmsBroker"/>
        <property name="embeddedWorkerFactory" ref="embeddedWorkerFactory"/>
        <!-- By default, the number of embedded workers equals the number of processors, if this
        value is not set -->
        <property name="embeddedWorkerCount" value="${number.of.embedded.workers}" />
        <property name="jobs" ref="jobs"/>
        <property name="stepInstanceDAO" ref="stepInstanceDAO"/>
        <property name="stepExecutionDAO" ref="stepExecutionDAO"/>
        <property name="connectionFactory" ref="inVmConnectionFactory"/>
        <property name="workerJobResponseQueueName" value="jms.queue.${mvn.worker.job.response.queue}"/>
        <property name="workerJobRequestQueueName" value="jms.queue.${mvn.worker.job.request.queue}"/>
    </bean>
</beans>

