<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                           http://www.springframework.org/schema/util
                           http://www.springframework.org/schema/util/spring-util.xsd
                           http://www.springframework.org/schema/lang
                           http://www.springframework.org/schema/lang/spring-lang-2.5.xsd">

    <import resource="jpa-context.xml"/>
    <import resource="oxm-context.xml"/>

    <bean id="dao" class="uk.ac.ebi.interpro.scan.genericjpadao.GenericDAOImpl">
        <constructor-arg value="uk.ac.ebi.interpro.scan.model.SignatureDatabaseRelease" />
    </bean>

    <util:map id="objectXmlMap" value-type="uk.ac.ebi.interpro.scan.model.ObjectXmlPair">
        <!-- HMM databases -->
        <entry key="Gene3D">
            <bean class="uk.ac.ebi.interpro.scan.model.ObjectXmlPair">
                <constructor-arg ref="gene3dObject"/>
                <constructor-arg ref="gene3dXml"/>
            </bean>
        </entry>
        <entry key="Pfam">
            <bean class="uk.ac.ebi.interpro.scan.model.ObjectXmlPair">
                <constructor-arg ref="pfamObject"/>
                <constructor-arg ref="pfamXml"/>
            </bean>
        </entry>
        <entry key="SMART">
            <bean class="uk.ac.ebi.interpro.scan.model.ObjectXmlPair">
                <constructor-arg ref="smartObject"/>
                <constructor-arg ref="smartXml"/>
            </bean>
        </entry>
        <entry key="SUPERFAMILY">
            <bean class="uk.ac.ebi.interpro.scan.model.ObjectXmlPair">
                <constructor-arg ref="superfamilyObject"/>
                <constructor-arg ref="superfamilyXml"/>
            </bean>
        </entry>        
        <!-- Non-HMM databases -->
        <entry key="PRINTS">
            <bean class="uk.ac.ebi.interpro.scan.model.ObjectXmlPair">
                <constructor-arg ref="printsObject"/>
                <constructor-arg ref="printsXml"/>
            </bean>
        </entry>
    </util:map>

    <lang:groovy id="gene3dObject">
        <lang:inline-script>
            <![CDATA[
                import uk.ac.ebi.interpro.scan.model.*
                SignatureDatabaseRelease release = new SignatureDatabaseRelease(new SignatureProvider("Gene 3D"), "3.1.0")
                Signature signature = release.addSignature(
                        new Signature.Builder("G3DSA:2.40.50.140")
                                .name("Nucleic acid-binding proteins")
                                .type("domain")
                                .build())
                signature.addModel(new Model("1o7iB00", "1o7iB00", "Nucleic acid-binding proteins"))
                return release
            ]]>
        </lang:inline-script>
    </lang:groovy>
    <bean id="gene3dXml" class="java.lang.String">
        <constructor-arg>
            <value>
                <![CDATA[
                <signature-database-release provider="Gene 3D" version="3.1.0" xmlns="http://www.ebi.ac.uk/schema/interpro/scan/model">
                    <signature ac="G3DSA:2.40.50.140" type="domain" name="Nucleic acid-binding proteins">
                        <models>
                            <model ac="1o7iB00" name="1o7iB00" desc="Nucleic acid-binding proteins"/>
                        </models>
                    </signature>
                </signature-database-release>
                ]]>
            </value>
        </constructor-arg>
    </bean>

    <lang:groovy id="pfamObject">
        <lang:inline-script>
            <![CDATA[
                import uk.ac.ebi.interpro.scan.model.*
                SignatureDatabaseRelease release = new SignatureDatabaseRelease(new SignatureProvider("Pfam"), "23.0")
                Signature signature = release.addSignature(
                        new Signature.Builder("PF00001")
                                .name("7tm_2")
                                .type("family")
                                .description("7 transmembrane receptor (rhodopsin family)")
                                .abstractText("This family contains, amongst other G-protein-coupled receptors (GPCRs), members of the opsin family, which have been considered to be typical members of the rhodopsin superfamily. They share several motifs, mainly the seven transmembrane helices, GPCRs of the rhodopsin superfamily. All opsins bind a chromophore, such as 11-cis-retinal. The function of most opsins other than the photoisomerases is split into two steps: light absorption and G-protein activation. Photoisomerases, on the other hand, are not coupled to G-proteins - they are thought to generate and supply the chromophore that is used by visual opsins [pubmed:15774036]")
                                .build())
                signature.addModel(new Model("PF00001", "7tm_2", "7 transmembrane receptor (rhodopsin family)"))
                return release
            ]]>
        </lang:inline-script>
    </lang:groovy>
    <bean id="pfamXml" class="java.lang.String">
        <constructor-arg>
            <value>
                <![CDATA[
                <signature-database-release provider="Pfam" version="23.0" xmlns="http://www.ebi.ac.uk/schema/interpro/scan/model">
                    <signature ac="PF00001" name="7tm_2" type="family" desc="7 transmembrane receptor (rhodopsin family)">
                        <abstract>This family contains, amongst other G-protein-coupled receptors (GPCRs), members of the opsin family, which have been considered to be typical members of the rhodopsin superfamily. They share several motifs, mainly the seven transmembrane helices, GPCRs of the rhodopsin superfamily. All opsins bind a chromophore, such as 11-cis-retinal. The function of most opsins other than the photoisomerases is split into two steps: light absorption and G-protein activation. Photoisomerases, on the other hand, are not coupled to G-proteins - they are thought to generate and supply the chromophore that is used by visual opsins [pubmed:15774036]</abstract>
                        <models>
                            <model ac="PF00001" name="7tm_2" desc="7 transmembrane receptor (rhodopsin family)"/>
                        </models>
                    </signature>
                </signature-database-release>
                ]]>
            </value>
        </constructor-arg>
    </bean>

    <lang:groovy id="smartObject">
        <lang:inline-script>
            <![CDATA[
                import uk.ac.ebi.interpro.scan.model.*
                SignatureDatabaseRelease release = new SignatureDatabaseRelease(new SignatureProvider("SMART"), "5.1")
                Signature signature = release.addSignature(
                        new Signature.Builder("SM00323")
                                .name("RasGAP_2")
                                .type("domain")
                                .description("GTPase-activator protein for Ras-like GTPases")
                                .abstractText("All alpha-helical domain that accelerates the GTPase activity of Ras, thereby \"switching\" it into an \"off\" position. Improved domain limits from structure.")
                                .build())
                signature.addModel(new Model("SM00323", "RasGAP_2", "GTPase-activator protein for Ras-like GTPases"))
                return release
            ]]>
        </lang:inline-script>
    </lang:groovy>
    <bean id="smartXml" class="java.lang.String">
        <constructor-arg>
            <value>
                <![CDATA[
                <signature-database-release provider="SMART" version="5.1" xmlns="http://www.ebi.ac.uk/schema/interpro/scan/model">
                    <signature ac="SM00323" type="domain" name="RasGAP_2" desc="GTPase-activator protein for Ras-like GTPases">
                        <abstract>All alpha-helical domain that accelerates the GTPase activity of Ras, thereby "switching" it into an "off" position. Improved domain limits from structure.</abstract>
                        <models>
                            <model ac="SM00323" name="RasGAP_2" desc="GTPase-activator protein for Ras-like GTPases" />
                        </models>
                    </signature>
                </signature-database-release>
                ]]>
            </value>
        </constructor-arg>
    </bean>

    <lang:groovy id="superfamilyObject">
        <lang:inline-script>
            <![CDATA[
                import uk.ac.ebi.interpro.scan.model.*
                SignatureDatabaseRelease release = new SignatureDatabaseRelease(new SignatureProvider("SUPERFAMILY"), "1.73")
                Signature signature = release.addSignature(
                        new Signature.Builder("SSF53098")
                                .name("Ribonuclease H-like")
                                .type("family")
                                .build())
                signature.addModel(new Model("0035188"))
                signature.addModel(new Model("0035416"))
                signature.addModel(new Model("0035463"))
                return release
            ]]>
        </lang:inline-script>
    </lang:groovy>
    <bean id="superfamilyXml" class="java.lang.String">
        <constructor-arg>
            <value>
                <![CDATA[
                <signature-database-release provider="SUPERFAMILY" version="1.73" xmlns="http://www.ebi.ac.uk/schema/interpro/scan/model">
                    <signature ac="SSF53098" type="family" name="Ribonuclease H-like">
                        <models>
                            <model ac="0035188"/>
                            <model ac="0035416"/>
                            <model ac="0035463"/>
                        </models>
                    </signature>
                </signature-database-release>
                ]]>
            </value>
        </constructor-arg>
    </bean>

    <lang:groovy id="printsObject">
        <lang:inline-script>
            <![CDATA[
                import uk.ac.ebi.interpro.scan.model.*
                SignatureDatabaseRelease release = new SignatureDatabaseRelease(new SignatureProvider("PRINTS"), "38.1")
                Signature s1 = release.addSignature(
                        new Signature.Builder("PR00238")
                                .name("OPSIN")
                                .type("family")
                                .description("Opsin signature")
                                .build())
                s1.addModel(new Model("PR00238"))
                Signature s2 = release.addSignature(
                        new Signature.Builder("PR00579")
                                .name("RHODOPSIN")
                                .type("family")
                                .abstractText("Opsins, the light-absorbing molecules that mediate vision [1,2], are integral membrane proteins that belong to a superfamily of G protein-coupled receptors (GPCRs).")
                                .build())
                s2.addModel(new Model("PR00579"))
                return release
            ]]>
        </lang:inline-script>
    </lang:groovy>
    <bean id="printsXml" class="java.lang.String">
        <constructor-arg>
            <value>
                <![CDATA[
                <signature-database-release provider="PRINTS" version="38.1" xmlns="http://www.ebi.ac.uk/schema/interpro/scan/model">
                    <signature ac="PR00238" name="OPSIN" type="family" desc="Opsin signature">
                        <models>
                            <model ac="PR00238"/>
                        </models>
                    </signature>
                    <signature ac="PR00579" name="RHODOPSIN" type="family">
                        <abstract>Opsins, the light-absorbing molecules that mediate vision [1,2], are integral membrane proteins that belong to a superfamily of G protein-coupled receptors (GPCRs).</abstract>
                        <models>
                            <model ac="PR00579"/>
                        </models>
                    </signature>
                </signature-database-release>
                ]]>
            </value>
        </constructor-arg>
    </bean> 
    
</beans>