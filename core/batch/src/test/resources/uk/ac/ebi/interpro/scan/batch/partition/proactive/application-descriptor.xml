<?xml version="1.0" encoding="UTF-8"?>
<GCMApplication xmlns="urn:gcm:application:1.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="urn:gcm:application:1.0 http://proactive.inria.fr/schemas/gcm/1.0/ApplicationDescriptorSchema.xsd">

    <!-- NOTE: Can use same descriptor for Master-Worker and Scheduler. To use in Scheduler: -->
    <!-- cp application-descriptor.xml ProActiveScheduling-1.0.0/config/deployment/GCMNodeSourceApplication.xml -->

    <environment>
        <!--
        To override variables use "-D" switch, for example:
        mvn clean compile exec:java -Dgcmd.file=/path/to/gcm.deployment -Dexec.mainClass=uk.ac.ebi.interpro.test.proactive.HelloWorldRunnerTest

        For standard Java system properties see: http://www.mindspring.com/~mgrand/java-system-properties.htm
        -->
        <javaPropertyVariable           name="user.home" />
        <javaPropertyDescriptorDefault  name="proactive.home"        value="${user.home}/lib/proactive"/>
        <javaPropertyDescriptorDefault  name="proactive.home.remote" value="${proactive.home}"/>
        <javaPropertyDescriptorDefault  name="gcmd.file"             value="Local4JVMDeployment.xml"/>
        <!-- TODO: Use property from Maven pom.xml -->
        <javaPropertyDescriptorDefault  name="spring.version"       value="2.5.6"/>
        <javaPropertyDescriptorDefault  name="spring.batch.version" value="2.0.1.RELEASE"/>
        <!-- TODO: Remove following when Emil fixes problem of not copying XML files to remote node -->
        <javaPropertyDescriptorDefault  name="lib.dir" value="${user.home}/.m2/repository"/>
    </environment>

    <application>
        <proactive base="root" relpath="${proactive.home.remote}">

            <configuration>
                <applicationClasspath>
                    <!--<pathElement base="root" relpath="${user.home}/projects/i5/batch/target/classes/"/>-->
                    <!-- Scheduler dependencies: -->
                    <pathElement base="proactive" relpath="/dist/lib/script-js.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/jruby-engine.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/jython-engine.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/script-api.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/js.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/jruby.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/jython.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/commons-logging-1.0.4.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/ProActive_SRM-common.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/ProActive_ResourceManager.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/ProActive_Scheduler-worker.jar"/>
                </applicationClasspath>
                <proactiveClasspath type="append">
                    <!-- TODO: Remove "classes" path when Emil fixes problem of not copying XML files to remote node -->
                    <pathElement base="root" relpath="${user.home}/projects/i5/batch/target/classes"/>
                    <pathElement base="root" relpath="${user.home}/projects/i5/batch/target/test-classes"/>
                    <!-- Because we set application classpath we have to add all the other JARs too (grr!) -->
                    <!-- i5 -->
                    <pathElement base="root" relpath="${lib.dir}/uk/ac/ebi/interpro/scan/model/interproscan-model/1.0-SNAPSHOT/interproscan-model-1.0-SNAPSHOT.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/uk/ac/ebi/interpro/scan/batch/proactive/interproscan-batch-proactive/1.0-SNAPSHOT/interproscan-batch-proactive-1.0-SNAPSHOT.jar"/>
                    <!-- ProActive -->
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/proactive-core/1.0.0/proactive-scheduler-1.0.0.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/javassist/1.0.0/javassist-1.0.0.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/fractal/1.0.0/fractal-1.0.0.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/bouncycastle/1.0.0/bouncycastle-1.0.0.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/saxon8/1.0.0/saxon8-1.0.0.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/saxon8-dom/1.0.0/saxon8-dom-1.0.0.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/jetty/1.0.0/jetty-1.0.0.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/jetty-util/1.0.0/jetty-util-1.0.0.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/servlet-api/1.0.0/servlet-api-1.0.0.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/ow2/proactive/scheduler/trilead-ssh2/1.0.0/trilead-ssh2-1.0.0.jar"/>
                    <!-- Application dependencies -->
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/spring-aop/${spring.version}/spring-aop-${spring.version}.jar"/>                    
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/spring-beans/${spring.version}/spring-beans-${spring.version}.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/spring-context/${spring.version}/spring-context-${spring.version}.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/spring-core/${spring.version}/spring-core-${spring.version}.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/spring-jdbc/${spring.version}/spring-jdbc-${spring.version}.jar"/>                    
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/spring-tx/${spring.version}/spring-tx-${spring.version}.jar"/>                    
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/batch/spring-batch-core/${spring.batch.version}/spring-batch-core-${spring.batch.version}.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/batch/spring-batch-infrastructure/${spring.batch.version}/spring-batch-infrastructure-${spring.batch.version}.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/aspectj/aspectjrt/1.5.4/aspectjrt-1.5.4.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/aspectj/aspectjweaver/1.5.4/aspectjweaver-1.5.4.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/codehaus/jettison/jettison/1.0/jettison-1.0.jar"/>                    
                    <pathElement base="root" relpath="${lib.dir}/aopalliance/aopalliance/1.0/aopalliance-1.0.jar"/>                    
                    <pathElement base="root" relpath="${lib.dir}/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/commons-lang/commons-lang/2.1/commons-lang-2.1.jar"/>                    
                    <pathElement base="root" relpath="${lib.dir}/com/thoughtworks/xstream/xstream/1.3/xstream-1.3.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/stax/stax-api/1.0.1/stax-api-1.0.1.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/log4j/log4j/1.2.14/log4j-1.2.14.jar"/>
                    <!-- TODO: See if we can remove following: -->
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/spring-jdbc/${spring.version}/spring-jdbc-${spring.version}.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/springframework/spring-test/${spring.version}/spring-test-${spring.version}.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/commons-dbcp/commons-dbcp/1.2.2/commons-dbcp-1.2.2.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/commons-pool/commons-pool/1.3/commons-pool-1.3.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/org/apache/commons/commons-io/1.3.2/commons-io-1.3.2.jar"/>                    
                    <pathElement base="root" relpath="${lib.dir}/hsqldb/hsqldb/1.8.0.7/hsqldb-1.8.0.7.jar"/>
                    <pathElement base="root" relpath="${lib.dir}/junit/junit/4.4/junit-4.4.jar"/>                                       
                </proactiveClasspath>
                <!-- TODO: Turn off debug mode in production -->
                <debug/>
            </configuration>        
            <virtualNode id="Workers">
                <nodeProvider refid="workers" />
            </virtualNode>
        </proactive>
	</application>

    <resources>
        <nodeProvider id="workers">
            <file path="${gcmd.file}"/>
        </nodeProvider>
    </resources>

</GCMApplication>
