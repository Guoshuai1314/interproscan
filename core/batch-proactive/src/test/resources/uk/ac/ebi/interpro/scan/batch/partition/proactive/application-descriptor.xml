<?xml version="1.0" encoding="UTF-8"?>
<GCMApplication xmlns="urn:gcm:application:1.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="urn:gcm:application:1.0 http://proactive.inria.fr/schemas/gcm/1.0/ApplicationDescriptorSchema.xsd">

    <!-- NOTE: Can use same descriptor for Master-Worker and Scheduler. To use in Scheduler: -->
    <!-- cp application-descriptor.xml ProActiveScheduling-1.0.0/config/deployment/GCMNodeSourceApplication.xml -->    

    <environment>
        <!--
        To override variables use "-D" switch, for example:
        mvn clean compile exec:java -Dgcmd.file=/path/to/gcm.deployment -Dexec.mainClass=uk.ac.ebi.interpro.test.proactive.HelloWorldRunnerTest

        For standard Java system properties see: http://www.mindspring.com/~mgrand/java-system-properties.htm
        -->
        <javaPropertyVariable           name="user.home" />
        <javaPropertyDescriptorDefault  name="proactive.home"        value="${user.home}/lib/proactive"/>
        <javaPropertyDescriptorDefault  name="proactive.home.remote" value="${proactive.home}"/>
        <javaPropertyDescriptorDefault  name="gcmd.file"             value="Local4JVMDeployment.xml"/>
    </environment>

    <application>
        <proactive base="root" relpath="${proactive.home.remote}">

            <configuration>
                <applicationClasspath>
                    <!--<pathElement base="root" relpath="${user.home}/projects/i5/batch/target/classes/"/>-->
                    <!-- Scheduler dependencies: -->
                    <pathElement base="proactive" relpath="/dist/lib/script-js.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/jruby-engine.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/jython-engine.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/script-api.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/js.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/jruby.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/jython.jar"/>                    
                    <pathElement base="proactive" relpath="/dist/lib/commons-logging-1.0.4.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/ProActive_SRM-common.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/ProActive_ResourceManager.jar"/>
                    <pathElement base="proactive" relpath="/dist/lib/ProActive_Scheduler-worker.jar"/>
                </applicationClasspath>
                <proactiveClasspath type="append">
                    <!-- TODO: Remove "classes" path when Emil fixes problem of not copying XML files to remote node -->
                    <pathElement base="root" relpath="${user.home}/projects/i5/batch-proactive/target/classes"/>
                    <pathElement base="root" relpath="${user.home}/projects/i5/batch-proactive/target/test-classes"/>
                    <!-- Because we set application classpath we have to add all the other JARs too (grr!) -->
                    <!-- ProActive -->
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/proactive-core/1.0.0/proactive-scheduler-1.0.0.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/javassist/1.0.0/javassist-1.0.0.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/fractal/1.0.0/fractal-1.0.0.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/bouncycastle/1.0.0/bouncycastle-1.0.0.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/saxon8/1.0.0/saxon8-1.0.0.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/saxon8-dom/1.0.0/saxon8-dom-1.0.0.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/jetty/1.0.0/jetty-1.0.0.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/jetty-util/1.0.0/jetty-util-1.0.0.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/servlet-api/1.0.0/servlet-api-1.0.0.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/ow2/proactive/scheduler/trilead-ssh2/1.0.0/trilead-ssh2-1.0.0.jar"/>
                    <!-- Application dependencies -->
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/spring-aop/2.5.6/spring-aop-2.5.6.jar"/>                    
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/spring-beans/2.5.6/spring-beans-2.5.6.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/spring-context/2.5.6/spring-context-2.5.6.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/spring-core/2.5.6/spring-core-2.5.6.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/spring-jdbc/2.5.6/spring-jdbc-2.5.6.jar"/>                    
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/spring-tx/2.5.6/spring-tx-2.5.6.jar"/>                    
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/batch/spring-batch-core/2.0.0.RELEASE/spring-batch-core-2.0.0.RELEASE.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/batch/spring-batch-infrastructure/2.0.0.RELEASE/spring-batch-infrastructure-2.0.0.RELEASE.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/aspectj/aspectjrt/1.5.4/aspectjrt-1.5.4.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/aspectj/aspectjweaver/1.5.4/aspectjweaver-1.5.4.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/codehaus/jettison/jettison/1.0/jettison-1.0.jar"/>                    
                    <pathElement base="root" relpath="${user.home}/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar"/>                    
                    <pathElement base="root" relpath="${user.home}/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/commons-lang/commons-lang/2.1/commons-lang-2.1.jar"/>                    
                    <pathElement base="root" relpath="${user.home}/.m2/repository/com/thoughtworks/xstream/xstream/1.3/xstream-1.3.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/stax/stax-api/1.0.1/stax-api-1.0.1.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/log4j/log4j/1.2.14/log4j-1.2.14.jar"/>
                    <!-- TODO: See if we can remove following: -->
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/spring-jdbc/2.5.6/spring-jdbc-2.5.6.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/springframework/spring-test/2.5.6/spring-test-2.5.6.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/commons-dbcp/commons-dbcp/1.2.2/commons-dbcp-1.2.2.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/commons-pool/commons-pool/1.3/commons-pool-1.3.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/org/apache/commons/commons-io/1.3.2/commons-io-1.3.2.jar"/>                    
                    <pathElement base="root" relpath="${user.home}/.m2/repository/hsqldb/hsqldb/1.8.0.7/hsqldb-1.8.0.7.jar"/>
                    <pathElement base="root" relpath="${user.home}/.m2/repository/junit/junit/4.4/junit-4.4.jar"/>                                       
                </proactiveClasspath>
                <!-- TODO: Turn off debug mode in production -->
                <debug/>
            </configuration>        
            <virtualNode id="Workers">
                <nodeProvider refid="workers" />
            </virtualNode>
        </proactive>
	</application>

    <resources>
        <nodeProvider id="workers">
            <file path="${gcmd.file}"/>
        </nodeProvider>
    </resources>

</GCMApplication>
